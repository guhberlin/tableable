/*
 *  jQuery tableable plugin - v1.2.0
 *  A plugin to filter, paginate and sort html tables
 *  
 *
 *  Made by socnab
 *  Under MIT License
 */
!function(a,b,c,d){"use strict";function e(b,c){this.element=b,this.settings=a.extend({},g,c,h),this._defaults=g,this._name=f,this.init()}var f="tableable",g={useFilter:!0,filterInputSelector:"",ignoreCase:!1,notFilterAttribute:"data-no-filter",usePager:!0,pagerListSelector:"",rowsPerPage:5,useSorter:!0,sortTriggerSelector:"",jumpPageOneAfterSort:!0,notSortableAttribute:"data-no-sort"},h={displayType:"table-row",updatedEvent:"updated",filteredAttribute:"data-is-filtered",filteredEvent:"filtered",pageIndexAttribute:"data-page-index",pageSwitchPageAttribute:"data-show-page-index",currentPageIndex:"1",pagedEvent:"paged",pageChangedEvent:"pageChanged",sortedAttribute:"data-sort-by",sortedEvent:"sorted"};e.prototype.init=function(){var b=this,c=b.settings.usePager&&b.settings.pagerListSelector.length,d=b.settings.useFilter&&b.settings.filterInputSelector.length,e=b.settings.useSorter&&a(b.element).find("thead").length;d&&b.initFilter(b,c),e&&b.initSort(b,c),c&&b.paginate()},e.prototype.trigger=function(b,c){var e=this,f=c===d?!0:c;a(e.element).trigger(b),f&&a(e.element).trigger(e.settings.updatedEvent)},e.prototype.initFilter=function(b,c){a(b.settings.filterInputSelector).keyup(function(){b.filter(a(this).val()),c&&b.paginate(),b.trigger(b.settings.filteredEvent)})},e.prototype.filter=function(b){var c=this;b=c.settings.ignoreCase?b.toLowerCase():b,a(c.element).children("tbody").children("tr").css("display","none").attr(c.settings.filteredAttribute,"").each(function(){var d=a(this);d.children("td").each(function(e,f){return c.settings.notFilterAttribute.length&&a(this).hasAttr(c.settings.notFilterAttribute)?void 0:(f=c.settings.ignoreCase?a(f).text().toLowerCase():a(f).text(),f.indexOf(b)>=0?void d.css("display",c.settings.displayType).removeAttr(c.settings.filteredAttribute):void 0)})})},e.prototype.initSort=function(b,c){a(b.element).children("thead").children("tr").children("th").each(function(){if(!b.settings.notSortableAttribute.length||!a(this).hasAttr(b.settings.notSortableAttribute)){var d=a(this).index()+1,e=b.settings.sortTriggerSelector.length?a(this).find(b.settings.sortTriggerSelector):a(this);e.on("click",function(){b.sortRows(d),c&&(b.settings.jumpPageOneAfterSort&&(b.settings.currentPageIndex="1"),b.paginate()),b.trigger(b.settings.sortedEvent)})}})},e.prototype.sortRows=function(b){var c=this,d=a(c.element).children("thead").children("tr").find(":nth-child("+b+")");d.hasAttr(c.settings.sortedAttribute)?"DESC"===d.attr(c.settings.sortedAttribute)?(c.sortAsc(b),d.attr(c.settings.sortedAttribute,"ASC")):(c.sortDesc(b),d.attr(c.settings.sortedAttribute,"DESC")):(d.parent().children("th").each(function(){a(this).removeAttr(c.settings.sortedAttribute)}),c.sortAsc(b),d.attr(c.settings.sortedAttribute,"ASC"))},e.prototype.sortWithCallback=function(b){var c=this,d=a(c.element).children("tbody").children("tr");d.length&&(a(c.element).children("tbody").empty(),d=d.sort(b),a(c.element).children("tbody").append(d))},e.prototype.sortAsc=function(b){var c=this;c.sortWithCallback(function(c,d){return a(d).find(":nth-child("+b+")").text()<a(c).find(":nth-child("+b+")").text()})},e.prototype.sortDesc=function(b){var c=this;c.sortWithCallback(function(c,d){return a(d).find(":nth-child("+b+")").text()>a(c).find(":nth-child("+b+")").text()})},e.prototype.paginate=function(){var b=this,c=0;a(b.element).children("tbody").children("tr").removeAttr(b.settings.pageIndexAttribute).filter(function(){return!a(this).hasAttr(b.settings.filteredAttribute)}).each(function(d){d%b.settings.rowsPerPage===0&&c++,a(this).attr(b.settings.pageIndexAttribute,c)}),b.buildPagerList(c),b.showPage(b.settings.currentPageIndex)},e.prototype.buildPagerList=function(b){var c=this;a(c.settings.pagerListSelector).empty();for(var d=1;b>=d;d++)a(c.settings.pagerListSelector).append("<li "+c.settings.pageSwitchPageAttribute+'="'+d+'" ><a>'+d+"</a></li>");a(c.settings.pagerListSelector+" li["+c.settings.pageSwitchPageAttribute+"]").on("click",function(){c.showPage(a(this).attr(c.settings.pageSwitchPageAttribute))})},e.prototype.showPage=function(b){var c=this;a(c.element).children("tbody").children("tr").css("display","none").filter(function(){return a(this).attr(c.settings.pageIndexAttribute)===b}).css("display",c.settings.displayType),c.settings.currentPageIndex=b,a(c.settings.pagerListSelector+" li["+c.settings.pageSwitchPageAttribute+"]").removeClass("active").filter(function(){return a(this).attr(c.settings.pageSwitchPageAttribute)===b}).addClass("active"),c.trigger(c.settings.pageChangedEvent,!1)},a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))}),this},a.fn.hasAttr=function(a){return this.attr(a)!==d}}(jQuery,window,document);