/*
 *  jQuery tableable plugin - v1.3.1
 *  A plugin to filter, paginate and sort html tables
 *  http://socnab.github.io/tableable
 *
 *  Made by socnab
 *  Under MIT License
 */
function Filter(a,b){this.element=a,this.settings=b,this.afterFilter=function(){};var c=this;$(this.settings.filterInputSelector).keyup(function(){c.filter($(this).val()),c.afterFilter()})}function Sorter(a,b){this.element=a,this.settings=b,this.afterSort=function(){};var c=this;if($(c.element).children("thead").children("tr").children("th").each(function(){if(!c.settings.notSortableAttribute.length||!$(this).hasAttr(c.settings.notSortableAttribute)){var a=$(this).index()+1,b=c.settings.sortTriggerSelector.length?$(this).find(c.settings.sortTriggerSelector):$(this);b.on("click",function(){c.sortRows(a),c.afterSort()})}}),c.settings.notSortableAttribute.length){var d=$(c.element).find("thead tr th:nth-child("+c.settings.initalSortColIndex+")");d&&!d.hasAttr(c.settings.notSortableAttribute)&&c.sortRows(c.settings.initalSortColIndex)}}function Pager(a,b){this.element=a,this.settings=b,this.afterPaginate=function(){}}function Options(){}function TableAble(a,b){this.element=a;var c=new Options;this.settings=$.extend({},c.getDefaults(),b,c.getUneditableDefaults()),this.init()}Filter.prototype.setAfterFilterCallback=function(a){var b=this;$.isFunction(a)&&(b.afterFilter=a)},Filter.prototype.filter=function(a){var b=this;a=b.settings.ignoreCase?a.toLowerCase():a,$(b.element).children("tbody").children("tr").css("display","none").attr(b.settings.filteredAttribute,"").each(function(){var c=$(this);c.children("td").each(function(d,e){return b.settings.notFilterAttribute.length&&$(this).hasAttr(b.settings.notFilterAttribute)?void 0:(e=b.settings.ignoreCase?$(e).text().toLowerCase():$(e).text(),e.indexOf(a)>=0?void c.css("display",b.settings.displayType).removeAttr(b.settings.filteredAttribute):void 0)})})},Sorter.prototype.setAfterSortCallback=function(a){var b=this;$.isFunction(a)&&(b.afterSort=a)},Sorter.prototype.sortRows=function(a){var b=this,c=$(b.element).children("thead").children("tr").find(":nth-child("+a+")");c.hasAttr(b.settings.sortedAttribute)?"DESC"===c.attr(b.settings.sortedAttribute)?(b.sortAsc(a),c.attr(b.settings.sortedAttribute,"ASC")):(b.sortDesc(a),c.attr(b.settings.sortedAttribute,"DESC")):(c.parent().children("th").each(function(){$(this).removeAttr(b.settings.sortedAttribute)}),b.sortAsc(a),c.attr(b.settings.sortedAttribute,"ASC"))},Sorter.prototype.sortWithCallback=function(a){var b=this,c=$(b.element).children("tbody").children("tr");c.length&&($(b.element).children("tbody").empty(),c=c.sort(a),$(b.element).children("tbody").append(c))},Sorter.prototype.sortAsc=function(a){var b=this;b.sortWithCallback(function(b,c){return $(c).find(":nth-child("+a+")").text()<$(b).find(":nth-child("+a+")").text()})},Sorter.prototype.sortDesc=function(a){var b=this;b.sortWithCallback(function(b,c){return $(c).find(":nth-child("+a+")").text()>$(b).find(":nth-child("+a+")").text()})},Pager.prototype.setAfterPaginateCallback=function(a){var b=this;$.isFunction(a)&&(b.afterPaginate=a)},Pager.prototype.paginate=function(){var a=this,b=0;$(a.element).children("tbody").children("tr").removeAttr(a.settings.pageIndexAttribute).filter(function(){return!$(this).hasAttr(a.settings.filteredAttribute)}).each(function(c){c%a.settings.rowsPerPage===0&&b++,$(this).attr(a.settings.pageIndexAttribute,b)}),a.buildPagerList(b),a.showPage(a.settings.currentPageIndex)},Pager.prototype.buildPagerList=function(a){var b=this;$(b.settings.pagerListSelector).empty();for(var c=1;a>=c;c++)$(b.settings.pagerListSelector).append("<li "+b.settings.pageSwitchPageAttribute+'="'+c+'" ><a>'+c+"</a></li>");$(b.settings.pagerListSelector+" li["+b.settings.pageSwitchPageAttribute+"]").on("click",function(){b.showPage($(this).attr(b.settings.pageSwitchPageAttribute))})},Pager.prototype.showPage=function(a){var b=this;$(b.element).children("tbody").children("tr").css("display","none").filter(function(){return $(this).attr(b.settings.pageIndexAttribute)===a}).css("display",b.settings.displayType),b.settings.currentPageIndex=a,$(b.settings.pagerListSelector+" li["+b.settings.pageSwitchPageAttribute+"]").removeClass("active").filter(function(){return $(this).attr(b.settings.pageSwitchPageAttribute)===a}).addClass("active"),b.afterPaginate()},Options.prototype.getDefaults=function(){return{useFilter:!0,filterInputSelector:"",ignoreCase:!1,notFilterAttribute:"data-no-filter",usePager:!0,pagerListSelector:"",rowsPerPage:5,useSorter:!0,sortTriggerSelector:"",jumpPageOneAfterSort:!0,notSortableAttribute:"data-no-sort",initalSortColIndex:-1}},Options.prototype.getUneditableDefaults=function(){return{displayType:"table-row",updatedEvent:"updated",filteredAttribute:"data-is-filtered",filteredEvent:"filtered",pageIndexAttribute:"data-page-index",pageSwitchPageAttribute:"data-show-page-index",currentPageIndex:"1",pagedEvent:"paged",pageChangedEvent:"pageChanged",sortedAttribute:"data-sort-by",sortedEvent:"sorted"}},TableAble.prototype.init=function(){var a=this,b=a.settings.usePager&&a.settings.pagerListSelector.length,c=a.settings.useFilter&&a.settings.filterInputSelector.length,d=a.settings.useSorter&&$(a.element).find("thead").length;b&&(a.pager=new Pager(a.element,a.settings),a.pager.setAfterPaginateCallback(function(){a.afterPaginate()})),c&&(a.filter=new Filter(a.element,a.settings),a.filter.setAfterFilterCallback(function(){a.afterFilter(b)})),d&&(a.sorter=new Sorter(a.element,a.settings),a.sorter.setAfterSortCallback(function(){a.afterSort(b)})),b&&a.pager.paginate()},TableAble.prototype.afterFilter=function(a){var b=this;a&&(b.settings.currentPageIndex="1",b.pager.paginate()),b.trigger(b.settings.filteredEvent)},TableAble.prototype.afterSort=function(a){var b=this;a&&(b.settings.jumpPageOneAfterSort&&(b.settings.currentPageIndex="1"),b.pager.paginate()),b.trigger(b.settings.sortedEvent)},TableAble.prototype.afterPaginate=function(){var a=this;a.trigger(a.settings.pageChangedEvent,!1)},TableAble.prototype.trigger=function(a,b){var c=this,d=void 0===b?!0:b;$(c.element).trigger(a),d&&$(c.element).trigger(c.settings.updatedEvent)},function(a,b,c,d){"use strict";a.fn.tableable=function(b){return this.each(function(){a.data(this,"plugin_tableable")||a.data(this,"plugin_tableable",new TableAble(this,b))}),this},a.fn.hasAttr=function(a){return this.attr(a)!==d}}(jQuery,window,document);