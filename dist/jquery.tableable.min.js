/*
 *  jQuery tableable plugin - v2.3.2
 *  A plugin to filter, paginate and sort html tables
 *  http://guhberlin.github.io/tableable
 *
 *  Made by guhberlin
 *  Under BSD-3-Clause License
 */
function Utils(){}function Filter(a,b){this.element=a,this.settings=b,this.afterFilter=function(){};var c=this;$(this.settings.filterInputSelector).keyup(function(){c.filter($(this).val()),c.afterFilter()})}function Sorter(a,b){this.element=a,this.settings=b,this.afterSort=function(){};var c=this;$(c.element).children("thead").children("tr").children("th").each(function(){if(!c.settings.notSortableAttribute.length||!Utils.Element(this).hasAttr(c.settings.notSortableAttribute)){var a=$(this).index()+1,b=c.settings.sortTriggerSelector.length?$(this).find(c.settings.sortTriggerSelector):$(this);b.on("click",function(){c.sortRows(a),c.afterSort()})}});var d=$(c.element).find("thead tr th:nth-child("+c.settings.initalSortColIndex+")");d&&!Utils.Element(d).hasAttr(c.settings.notSortableAttribute)&&c.sortRows(c.settings.initalSortColIndex)}function Pager(a,b){this.element=a,this.settings=b,this.afterPaginate=function(){},this.pagerListBuildFunction=this.settings.useDottedPager?"buildDottedPagerList":"buildFullPagerList"}function Options(){}function TableAble(a,b){this.element=a;var c=new Options;this.settings=$.extend(!0,{},c.getDefaults(),b,c.getUneditableDefaults()),this.settings.pager.attrsToIgnoreRowOnPaging=[].concat([this.settings.filter.filteredAttribute],this.settings.pager.customFilterAttributes),this.init()}Utils.Element=function(a){var b=this.Element.prototype;return b.el=$(a),b},Utils.Element.prototype.hasAttr=function(a){return void 0!==a?void 0!==$(this.el).attr(a):!1},Utils.Element.prototype.hasOneOfAttrs=function(a){var b=this;return a.filter(function(a){return b.hasAttr(a)}).length>0},Filter.prototype.setAfterFilterCallback=function(a){var b=this;$.isFunction(a)&&(b.afterFilter=a)},Filter.prototype.filter=function(a){var b=this,c=[];a=b.settings.ignoreCase?a.toLowerCase():a,$(b.element).children("thead").children("tr").children("th["+b.settings.notFilterAttribute+"]").each(function(){c.push($(this).index())}),$(b.element).children("tbody").children("tr").css("display","none").attr(b.settings.filteredAttribute,"").each(function(){var d=$(this);d.children("td").each(function(e,f){c.indexOf($(this).index())>=0||Utils.Element(this).hasAttr(b.settings.notFilterAttribute)||(f=b.settings.ignoreCase?$(f).text().toLowerCase():$(f).text(),f.indexOf(a)>=0&&d.css("display",b.settings.displayType).removeAttr(b.settings.filteredAttribute))})})},Filter.prototype.triggerFilter=function(){var a=this;a.filter($(a.settings.filterInputSelector).val()),a.afterFilter()},Sorter.prototype.setAfterSortCallback=function(a){var b=this;$.isFunction(a)&&(b.afterSort=a)},Sorter.prototype.sortRows=function(a){var b=this,c=$(b.element).children("thead").children("tr").find(":nth-child("+a+")"),d="ASC"!==c.attr(b.settings.sortedAttribute)?"ASC":"DESC";b["sort"+d](a),c.parent().children("th").removeAttr(b.settings.sortedAttribute),c.attr(b.settings.sortedAttribute,d)},Sorter.prototype.sortASC=function(a){var b=this;b.sortWithCallback(function(c,d){return b.sortCallback(c,d,a)})},Sorter.prototype.sortDESC=function(a){var b=this;b.sortWithCallback(function(c,d){return b.sortCallback(d,c,a)})},Sorter.prototype.sortCallback=function(a,b,c){return $(b).find(":nth-child("+c+")").text()<$(a).find(":nth-child("+c+")").text()?1:-1},Sorter.prototype.sortWithCallback=function(a){var b=this;$(b.element).children("tbody").append($(b.element).children("tbody").children("tr").sort(a))},Pager.prototype.setAfterPaginateCallback=function(a){var b=this;$.isFunction(a)&&(b.afterPaginate=a)},Pager.prototype.paginate=function(){var a=this,b=0;$(a.element).children("tbody").children("tr").removeAttr(a.settings.pageIndexAttribute).filter(function(){return!Utils.Element(this).hasOneOfAttrs(a.settings.attrsToIgnoreRowOnPaging)}).each(function(c){c%a.settings.rowsPerPage===0&&b++,$(this).attr(a.settings.pageIndexAttribute,b)}),a.showPage(a.settings.currentPageIndex)},Pager.prototype.getPageCount=function(){var a=this;return Math.ceil($(a.element).children("tbody").children("tr").filter(function(){return!Utils.Element(this).hasOneOfAttrs(a.settings.attrsToIgnoreRowOnPaging)}).length/a.settings.rowsPerPage)},Pager.prototype.buildPagerList=function(){var a=this;$(a.settings.pagerListSelector).empty(),a[a.pagerListBuildFunction](),$(a.settings.pagerListSelector+" li["+a.settings.showPageIndexAttribute+"]").on("click",function(){a.showPage($(this).attr(a.settings.showPageIndexAttribute))})},Pager.prototype.buildFullPagerList=function(){for(var a=this,b=a.getPageCount(),c=1;b>=c;c++)$(a.settings.pagerListSelector).append("<li "+a.settings.showPageIndexAttribute+'="'+c+'"><a>'+c+"</a></li>")},Pager.prototype.buildDottedPagerList=function(){for(var a=this,b=parseInt(a.settings.currentPageIndex),c=parseInt(a.settings.noOfShownPagesStartEnd),d=parseInt(a.settings.noOfShownPagesNextToCurrentPage),e=a.getPageCount(),f=!1,g=1;e>=g;g++)c>=g||g>=b-d&&b+d>=g||g>e-c?($(a.settings.pagerListSelector).append("<li "+a.settings.showPageIndexAttribute+'="'+g+'"><a>'+g+"</a></li>"),f=!0):f&&($(a.settings.pagerListSelector).append("<li><a>...</a></li>"),f=!1)},Pager.prototype.showPage=function(a){if(-1!==a){var b=this;$(b.element).children("tbody").children("tr").css("display","none").filter("tr["+b.settings.pageIndexAttribute+'="'+a+'"]').css("display",b.settings.displayType),b.settings.currentPageIndex=a,b.buildPagerList(),$(b.settings.pagerListSelector+" li").removeClass("active"),$(b.settings.pagerListSelector+" li["+b.settings.showPageIndexAttribute+'="'+a+'"]').addClass("active"),b.afterPaginate()}},Options.prototype.getDefaults=function(){return{filter:{filterInputSelector:"",ignoreCase:!1,notFilterAttribute:"data-no-filter"},pager:{useDottedPager:!0,pagerListSelector:"",rowsPerPage:5,noOfShownPagesStartEnd:2,noOfShownPagesNextToCurrentPage:1,customFilterAttributes:[]},sorter:{sortTriggerSelector:"",jumpPageOneAfterSort:!0,notSortableAttribute:"data-no-sort",initalSortColIndex:-1}}},Options.prototype.getUneditableDefaults=function(){return{filter:{filteredAttribute:"data-is-filtered"},pager:{pageIndexAttribute:"data-page-index",showPageIndexAttribute:"data-show-page-index",displayType:"table-row",currentPageIndex:"1"},sorter:{sortedAttribute:"data-sort-by"},events:{sorted:"sorted",filtered:"filtered",updated:"updated",paged:"paged",refresh:"refresh"}}},TableAble.prototype.init=function(){var a=this,b=a.settings.pager&&a.settings.pager.pagerListSelector.length,c=a.settings.filter&&a.settings.filter.filterInputSelector.length,d=a.settings.sorter&&$(a.element).find("thead").length;b&&(a.pager=new Pager(a.element,a.settings.pager),a.pager.setAfterPaginateCallback(function(){a.afterPaginate()})),c&&(a.filter=new Filter(a.element,a.settings.filter),a.filter.setAfterFilterCallback(function(){a.afterFilter(b)})),d&&(a.sorter=new Sorter(a.element,a.settings.sorter),a.sorter.setAfterSortCallback(function(){a.afterSort(b)})),b&&a.pager.paginate(),$(a.element).on(a.settings.events.refresh,function(){c?a.filter.triggerFilter():b&&a.pager.paginate()})},TableAble.prototype.afterFilter=function(a){var b=this;b.trigger(b.settings.events.filtered,!1),a?(b.settings.currentPageIndex="1",b.pager.paginate()):b.trigger(b.settings.events.updated)},TableAble.prototype.afterSort=function(a){var b=this;b.trigger(b.settings.events.sorted,!1),a?(b.settings.jumpPageOneAfterSort&&(b.settings.currentPageIndex="1"),b.pager.paginate()):b.trigger(b.settings.events.updated)},TableAble.prototype.afterPaginate=function(){var a=this;a.trigger(a.settings.events.paged)},TableAble.prototype.trigger=function(a,b){var c=this,d=void 0===b?!0:b;$(c.element).trigger(a),d&&$(c.element).trigger(c.settings.events.updated)},function(a){"use strict";a.fn.tableable=function(b){return this.each(function(){a.data(this,"plugin_tableable")||a.data(this,"plugin_tableable",new TableAble(this,b))}),this}}(jQuery,window,document);