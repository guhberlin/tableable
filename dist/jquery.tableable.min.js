/*
 *  jQuery tableable plugin - v2.4.7
 *  A plugin to filter, paginate and sort html tables
 *  http://guhberlin.github.io/tableable
 *
 *  Made by guhberlin
 *  Under BSD-3-Clause License
 */
function Utils(){}function Filter(a,b,c,d){this.element=a,this.settings=b,this.constants=c,this.afterFilter=d;var e=this;$(this.settings.filterInputSelector).keyup(function(){e.filter()}),e.filter()}function Sorter(a,b,c,d){this.element=a,this.settings=b,this.constants=c,this.afterSort=d;var e=this;$(e.element).children(e.constants.get("selector","thead")).children(e.constants.get("selector","tr")).children(e.constants.get("selector","th")).each(function(){if(!e.settings.notSortableAttribute.length||!Utils.Element(this).hasAttr(e.settings.notSortableAttribute)){var a=$(this).index()+1,b=e.settings.sortTriggerSelector.length?$(this).find(e.settings.sortTriggerSelector):$(this);b.on("click",function(){e.sortRows(a),e.afterSort()})}});var f=$(e.element).find(e.constants.get("selector","thead")+" "+e.constants.get("selector","tr")+" "+e.constants.get("selector","th")+":nth-child("+e.settings.initalSortColIndex+")");f&&!Utils.Element(f).hasAttr(e.settings.notSortableAttribute)&&e.sortRows(e.settings.initalSortColIndex)}function Pager(a,b,c,d){this.element=a,this.settings=b,this.constants=c,this.afterPaginate=d,this.pagerListBuildFunction=this.settings.useDottedPager?"buildDottedPagerList":"buildFullPagerList",this.paginate()}function Options(){}function Constants(a){this.element=a,this.elementType="table"===$(a).prop("tagName").toLowerCase()?"table":"block",this.selectors={},this.selectors.table=this.getTableSelectors(),this.selectors.block=this.getBlockSelectors()}function TableAble(a,b){this.element=$(a),this.constants=new Constants(a),this.initSettings(b).initFeatures()}Utils.Element=function(a){var b=this.Element.prototype;return b.el=$(a),b},Utils.Element.prototype.hasAttr=function(a){return void 0!==a?void 0!==$(this.el).attr(a):!1},Utils.Element.prototype.hasOneOfAttrs=function(a){var b=this;return a.filter(function(a){return b.hasAttr(a)}).length>0},Filter.prototype.filter=function(){var a=this,b=[],c=$(a.settings.filterInputSelector).val();c=a.settings.ignoreCase?c.toLowerCase():c,$(a.element).children(a.constants.get("selector","thead")).children(a.constants.get("selector","tr")).children(a.constants.get("selector","th")+"["+a.settings.notFilterAttribute+"]").each(function(){b.push($(this).index())}),$(a.element).children(a.constants.get("selector","tbody")).children(a.constants.get("selector","tr")).css("display","none").attr(a.settings.filteredAttribute,"").each(function(){var d=$(this);d.children(a.constants.get("selector","td")).each(function(e,f){b.indexOf($(this).index())>=0||Utils.Element(this).hasAttr(a.settings.notFilterAttribute)||Utils.Element(d).hasOneOfAttrs(a.settings.customFilteredAttributes)||(f=a.settings.ignoreCase?$(f).text().toLowerCase():$(f).text(),f.indexOf(c)>=0&&d.css("display",a.settings.displayType).removeAttr(a.settings.filteredAttribute))})}),a.afterFilter()},Sorter.prototype.sortRows=function(a){var b=this,c=$(b.element).children(b.constants.get("selector","thead")).children(b.constants.get("selector","tr")).find(":nth-child("+a+")"),d="ASC"!==c.attr(b.settings.sortedAttribute)?"ASC":"DESC";b["sort"+d](a),c.parent().children(b.constants.get("selector","th")).removeAttr(b.settings.sortedAttribute),c.attr(b.settings.sortedAttribute,d)},Sorter.prototype.sortASC=function(a){var b=this;b.sortWithCallback(function(c,d){return b.sortCallback(c,d,a)})},Sorter.prototype.sortDESC=function(a){var b=this;b.sortWithCallback(function(c,d){return b.sortCallback(d,c,a)})},Sorter.prototype.sortCallback=function(a,b,c){function d(a){return $($(a).find(e.constants.get("selector","td"))[c-1]).text()}var e=this;return d(b)<d(a)?1:-1},Sorter.prototype.sortWithCallback=function(a){var b=this;$(b.element).children(b.constants.get("selector","tbody")).append($(b.element).children(b.constants.get("selector","tbody")).children(b.constants.get("selector","tr")).sort(a))},Pager.prototype.paginate=function(){var a=this,b=0;$(a.element).children(a.constants.get("selector","tbody")).children(a.constants.get("selector","tr")).removeAttr(a.settings.pageIndexAttribute).filter(function(){return!Utils.Element(this).hasOneOfAttrs(a.settings.customFilteredAttributes)&&!Utils.Element(this).hasAttr(a.settings.filteredAttribute)}).each(function(c){c%a.settings.rowsPerPage===0&&b++,$(this).attr(a.settings.pageIndexAttribute,b)}),a.showPage(a.settings.currentPageIndex)},Pager.prototype.getPageCount=function(){var a=this;return Math.ceil($(a.element).children(a.constants.get("selector","tbody")).children(a.constants.get("selector","tr")).filter(function(){return!Utils.Element(this).hasOneOfAttrs(a.settings.customFilteredAttributes)&&!Utils.Element(this).hasAttr(a.settings.filteredAttribute)}).length/a.settings.rowsPerPage)},Pager.prototype.buildPagerList=function(){var a=this,b=parseInt(a.settings.currentPageIndex),c=a.getPageCount();$(a.settings.pagerListSelector).empty(),a.settings.firstLable.length>0&&a.appendPagerItem(a.settings.firstLable,b>1?1:a.settings.inactivPagerIndex),a.settings.prevLable.length>0&&a.appendPagerItem(a.settings.prevLable,b>1?b-1:a.settings.inactivPagerIndex),a[a.pagerListBuildFunction](),a.settings.nextLable.length>0&&a.appendPagerItem(a.settings.nextLable,c>b?b+1:a.settings.inactivPagerIndex),a.settings.lastLable.length>0&&a.appendPagerItem(a.settings.lastLable,c>b?c:a.settings.inactivPagerIndex),$(a.settings.pagerListSelector+" li["+a.settings.showPageIndexAttribute+"]").on("click",function(){a.showPage($(this).attr(a.settings.showPageIndexAttribute))})},Pager.prototype.buildFullPagerList=function(){for(var a=this,b=a.getPageCount(),c=1;b>=c;c++)a.appendPagerItem(c,c)},Pager.prototype.buildDottedPagerList=function(){for(var a=this,b=parseInt(a.settings.currentPageIndex),c=parseInt(a.settings.noOfShownPagesStartEnd),d=parseInt(a.settings.noOfShownPagesNextToCurrentPage),e=a.getPageCount(),f=!0,g=1;e>=g;g++)c>=g||g>=b-d&&b+d>=g||g>e-c?(a.appendPagerItem(g,g),f=!0):f&&(a.appendPagerItem("..."),f=!1)},Pager.prototype.showPage=function(a){var b=this;a!==b.settings.inactivPagerIndex&&($(b.element).children(b.constants.get("selector","tbody")).children(b.constants.get("selector","tr")).css("display","none").filter(b.constants.get("selector","tr")+"["+b.settings.pageIndexAttribute+'="'+a+'"]').css("display",b.settings.displayType),b.settings.currentPageIndex=a,b.buildPagerList(),$(b.settings.pagerListSelector+" li").removeClass("active"),$(b.settings.pagerListSelector+" li["+b.settings.showPageIndexAttribute+'="'+a+'"]').addClass("active"),b.afterPaginate())},Pager.prototype.appendPagerItem=function(a,b,c){var d=this,e="",f="";void 0!==b&&(e=d.settings.showPageIndexAttribute+'="'+b+'"'),f=$.map(c||{},function(a,b){return a+'="'+b+'"'}).join(" "),$(d.settings.pagerListSelector).append("<li  "+e+" "+f+"><a>"+a+"</a></li>")},Options.prototype.getDefaults=function(){return{filter:{filterInputSelector:"",ignoreCase:!1,notFilterAttribute:"data-no-filter",customFilteredAttributes:[]},pager:{useDottedPager:!0,pagerListSelector:"",rowsPerPage:5,customFilteredAttributes:[],noOfShownPagesStartEnd:2,noOfShownPagesNextToCurrentPage:1,inactivPagerIndex:"-1",firstLable:"",prevLable:"",nextLable:"",lastLable:""},sorter:{sortTriggerSelector:"",jumpPageOneAfterSort:!0,notSortableAttribute:"data-no-sort",initalSortColIndex:-1}}},Options.prototype.getUneditableDefaults=function(){return{filter:{filteredAttribute:"data-is-filtered",displayType:"table-row"},pager:{pageIndexAttribute:"data-page-index",showPageIndexAttribute:"data-show-page-index",displayType:"table-row",currentPageIndex:"1"},sorter:{sortedAttribute:"data-sort-by"},events:{sorted:"sorted",filtered:"filtered",updated:"updated",paged:"paged",refresh:"refresh"}}},Constants.prototype.get=function(a,b){var c=this;switch(a){case"selector":return c.selectors[c.elementType][b.toLowerCase()];default:return c[a][b.toLowerCase()]}},Constants.prototype.getTableSelectors=function(){return{table:"table",tbody:"tbody",thead:"thead",tfoot:"tfoot",tr:"tr",th:"th",td:"td"}},Constants.prototype.getBlockSelectors=function(){return{table:".ta-table",tbody:".ta-tbody",thead:".ta-thead",tfoot:".ta-tfoot",tr:".ta-tr",th:".ta-th",td:".ta-td"}},TableAble.prototype.initSettings=function(a){var b=this,c=new Options;return b.settings={},b.settings.shouldPaginate=a.pager&&a.pager.pagerListSelector.length?!0:!1,b.settings.shouldFilter=a.filter&&a.filter.filterInputSelector.length?!0:!1,b.settings.shouldSort=a.sorter&&$(b.element).find(b.constants.get("selector","thead")).length?!0:!1,b.settings=$.extend(!0,b.settings,c.getDefaults(),a,c.getUneditableDefaults()),b.settings.pager.filteredAttribute=b.settings.filter.filteredAttribute,b},TableAble.prototype.initFeatures=function(){var a=this;return a.settings.shouldPaginate&&(a.pager=new Pager(a.element,a.settings.pager,a.constants,function(){a.afterPaginate()})),a.settings.shouldFilter&&(a.filter=new Filter(a.element,a.settings.filter,a.constants,function(){a.afterFilter()})),a.settings.shouldSort&&(a.sorter=new Sorter(a.element,a.settings.sorter,a.constants,function(){a.afterSort()})),$(a.element).on(a.settings.events.refresh,function(){a.settings.shouldFilter?a.filter.filter():a.settings.shouldPaginate&&a.pager.paginate()}),a},TableAble.prototype.afterFilter=function(){var a=this;a.trigger(a.settings.events.filtered,!1),a.settings.shouldPaginate?(a.settings.pager.currentPageIndex="1",a.pager.paginate()):a.trigger(a.settings.events.updated)},TableAble.prototype.afterSort=function(){var a=this;a.trigger(a.settings.events.sorted,!1),a.settings.shouldPaginate?(a.settings.jumpPageOneAfterSort&&(a.settings.pager.currentPageIndex="1"),a.pager.paginate()):a.trigger(a.settings.events.updated)},TableAble.prototype.afterPaginate=function(){var a=this;a.trigger(a.settings.events.paged)},TableAble.prototype.trigger=function(a,b){var c=this,d=void 0===b?!0:b;$(c.element).trigger(a),d&&a!==c.settings.events.updated&&$(c.element).trigger(c.settings.events.updated)},function(a){"use strict";a.fn.tableable=function(b){return this.each(function(){a.data(this,"plugin_tableable")||a.data(this,"plugin_tableable",new TableAble(this,b))}),this}}(jQuery,window,document);